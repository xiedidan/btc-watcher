# BTC Watcher 需求文档

## 项目概述
BTC Watcher 是一个专为个人交易者设计的电子货币监控系统，主要用于监控加密货币价格走势、技术指标，并通过多种渠道发送交易信号通知。系统注重易用性和部署便捷性。

## 核心功能需求

### 1. Web UI 管理界面

#### 1.1 货币对管理
- **功能**: 添加、删除、编辑要监控的加密货币交易对
- **支持交易所**: Binance、OKX、Bybit 等主流交易所
- **配置项**: 交易对名称、交易所、监控间隔、启用状态
- **界面要求**: 简洁直观的表格展示，支持批量操作

#### 1.2 Strategy 管理
- **功能**: 创建、配置、启停多个监控策略
- **参数配置**: 每个策略支持自定义参数配置
- **进程状态**: 实时显示策略运行状态（运行中/已停止/错误）
- **日志查看**: 查看策略运行日志和错误信息

#### 1.3 图表展示
- **K线图**: 显示选定货币对的价格走势
- **技术指标**: 支持常用技术指标叠加（MA、MACD、RSI、布林带等）
- **信号标注**: 在图表上标记策略产生的买卖信号
- **时间周期**: 支持多种时间周期切换（1m、5m、15m、1h、4h、1d）

#### 1.4 通知设置
- **通知渠道配置**: 微信、飞书、Telegram、邮件、短信
- **通知规则**: 支持按策略、货币对、信号类型设置通知
- **消息模板**: 自定义通知消息格式

### 2. FreqTrade 监控策略

#### 2.1 策略框架
- **基础**: 基于 FreqTrade 框架开发
- **模式**: 仅输出信号，不执行实际交易
- **多策略**: 支持同时运行多个策略实例
- **热更新**: 支持不重启服务更新策略参数

#### 2.2 信号输出
- **信号类型**: 买入信号、卖出信号、止损信号
- **信号数据**: 包含时间、货币对、价格、信号强度、策略名称
- **存储方式**: 将信号存储到数据库，供Web界面查询展示

#### 2.3 数据获取
- **实时数据**: 从交易所API获取实时价格数据
- **历史数据**: 支持回测和历史数据分析
- **数据管理**: 自动清理过期数据，控制存储空间

### 3. 通知系统

#### 3.1 通知渠道
- **微信**: 通过企业微信或微信测试号发送
- **飞书**: 通过飞书机器人发送群消息
- **Telegram**: 通过 Telegram Bot 发送消息
- **邮件**: SMTP 邮件通知
- **短信**: 第三方短信服务API

#### 3.2 通知管理
- **实时通知**: 策略产生信号时立即发送
- **批量通知**: 支持定时汇总发送
- **通知历史**: 记录所有通知发送历史
- **失败重试**: 通知发送失败时自动重试

## 非功能性需求

### 4.1 性能要求
- **响应时间**: Web界面操作响应时间 < 2秒
- **数据延迟**: 价格数据延迟 < 5秒
- **并发处理**: 支持同时监控至少50个货币对
- **系统稳定性**: 7*24小时稳定运行

### 4.2 部署要求
- **容器化**: 完全Docker化部署
- **跨平台**: 支持WSL2和Linux环境
- **一键部署**: 提供启停脚本，简化运维操作
- **配置管理**: 配置文件外部化，方便修改

### 4.3 数据要求
- **数据持久化**: 所有配置和历史数据持久化存储
- **数据备份**: 支持数据导出和恢复
- **数据安全**: 敏感信息加密存储

### 4.4 监控要求
- **健康检查**: 各组件健康状态监控
- **错误处理**: 完善的错误处理和恢复机制
- **日志管理**: 结构化日志输出，便于问题排查

## 用户角色和权限

### 5.1 管理员用户
- 系统配置管理
- 策略创建和修改
- 通知渠道配置
- 系统监控和维护

## 技术约束

### 6.1 开发约束
- 优先使用成熟的开源框架和工具
- 代码结构清晰，便于个人维护
- 详细的文档和注释

### 6.2 部署约束
- 最小化依赖，降低部署复杂度
- 支持离线部署
- 资源占用合理（内存 < 2GB，CPU < 50%）

## 验收标准

1. **功能完整性**: 所有核心功能正常工作
2. **易用性**: 非技术用户能够快速上手使用
3. **稳定性**: 连续运行一周无崩溃
4. **部署便捷性**: 新环境部署时间 < 30分钟
5. **通知及时性**: 信号产生到通知发送时间 < 10秒